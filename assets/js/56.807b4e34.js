(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{466:function(t,s,a){"use strict";a.r(s);var e=a(2),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),s("p",[t._v("网上很多都采用init.d或者rc.local来制作开机脚本，经过实验以上两种都比较麻烦，本文采用目前Ubuntu默认支持的systermd方式添加开机启动脚本")]),t._v(" "),s("h2",{attrs:{id:"过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#过程"}},[t._v("#")]),t._v(" 过程")]),t._v(" "),s("h3",{attrs:{id:"制作service文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#制作service文件"}},[t._v("#")]),t._v(" 制作service文件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vim /usr/lib/systemd/system/startup.service\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[Unit]\nDescription=Startup Script\nAfter=network.target\n\n[Service]\nType=oneshot\nExecStart=/usr/local/etc/startup.sh\n\n[Install]\nWantedBy=multi-user.target\n")])])]),s("h3",{attrs:{id:"制作-sh脚本文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#制作-sh脚本文件"}},[t._v("#")]),t._v(" 制作.sh脚本文件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vim /usr/local/etc/startup.sh\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("#!/bin/bash\n\nif [ ! -f /root/service.txt ]\nthen\n    echo `date -R` > /root/service.txt\nelse\n    echo `date -R` >> /root/service.txt\nfi\n")])])]),s("p",[t._v("赋予执行权限")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("chmod +x /usr/local/etc/startup.sh\n")])])]),s("h3",{attrs:{id:"开机启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开机启动"}},[t._v("#")]),t._v(" 开机启动")]),t._v(" "),s("p",[t._v("此步骤相当于将"),s("code",[t._v("/usr/lib/systemd/system/startup.sh")]),t._v("链接到"),s("code",[t._v("/etc/systemd/system/multi-user.target.wants/startup.service")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("systemctl enable startup.service\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("systemctl daemon-reload\n")])])]),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("此方法相对于其他方法更加简单方便，也是Ubuntu现在默认的添加开机启动的方案")])])}),[],!1,null,null,null);s.default=r.exports}}]);